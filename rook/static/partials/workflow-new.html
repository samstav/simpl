<div id="leftControls" class="lcontrols no-select" ng-cloak ng-show="showControls">
  <div class="tControls">
    <div class="top" ng-cloak ng-show="data">
      <button ng-click="workflow_action(data.id, 'execute')" class="btn" tooltip="Run workflow" alt="Run"><i class="icon-play"></i></button>
      <button ng-click="navigate(data.tenantId + '/workflows/' + data.id + '/status')" class="btn" tooltip="Check status" alt="Status"><i class="icon-heart"></i></button>
    </div>
    <div class="bottom" ng-cloak ng-show="data">
      <button ng-click="load()" class="btn" tooltip="Refresh" alt="Refresh"><i class="icon-repeat"></i></button>
    </div>
  </div>
</div>

<div class="span3 summaryBar">
  <div class="summaryHeader" ng-cloak ng-show="data">
    <div class="top well" ng-cloak ng-show="showStatus">
      <div class="row-fluid" style="height: 20px;">
        <div class="span6 actions">
          Workflow
        </div>
        <div class="deployment_link span6 pull-right">
          <a data-ng-href="/{{data.tenantId}}/deployments/{{data.id}}">See deployment</a>
        </div>
      </div>

      <h4>{{data.wf_spec.name}}</h4>

      <div class="progress" style="height: 10px;">
        <div class="bar" ng-style="{width: percentComplete() + '%'}"></div>
      </div>

      <div>
        Expected to finish {{timeRemaining | secondsETA}}
      </div>

      <div>
        <a class="label label-info" tooltip="Total items" ng-click="showAll()">{{count}}</a> tasks:
        <a class="label label-success" tooltip="Completed" ng-click="showUnread()">{{taskStates['completed'] + taskStates['ready']}}</a>
        <a class="label label-warning" tooltip="Waiting" ng-click="showStarred()">{{taskStates['waiting']}}</a>
        <a class="label label-important" tooltip="Errors" ng-click="showRead()">{{taskStates['error']}}</a>, and
        <a class="label" tooltip="Other" ng-click="showRead()">{{taskStates['future'] + taskStates['likely'] + taskStates['maybe']}}</a>
      </div>
    </div>
  </div>

  <div id="spec_list" class="summaries" ng-cloak ng-show="data">
    <!--
    <div class="top">
      <a href="#{{key}}" ng-repeat="(key, spec) in data.wf_spec.task_specs" class="nohover">
        <div class="well summary" ng-click="selectSpec(key)" ng-class="{active: current_spec_index == key}">
          <div class="row-fluid">
            <h6>{{spec.name}} <span ng-class="state_class({state: spec_status(key)})">{{task_count(key)}} tasks</span></h6>
          </div>

          <div class="row-fluid">
            {{spec.description}}
          </div>
        </div>
      </a>
    </div>
    -->
  </div>
</div>

<div class="entries">
  <div class="nothingSelected" ng-cloak ng-hide="data">
    <p>Nothing selected.</p>
  </div>
  <p><a ng-click="start_tree_preview('#workflow_tree')">Activate</a></p>
  <div id="workflow_tree" ng-show="data">
  </div>
</div>

<script type="text/ng-template" id="task.html">
<a href="#" ng-click="selectTask(task.id)"> Task {{task.id}}
<span tooltip="{{task.description}}" ng-class="state_class(task)">{{state_name(task)}}</span></a>
</script>
