<div class="entries container-fluid" ng-init="load()" ng-show="is_content_loaded()">
  <table class="table table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Blueprint</th>
        <th ng-cloak ng-show="is_admin() && !is_impersonating()">Tenant</th>
        <th>Status</th>
        <th>Created</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="deployment in items | orderBy:'-created'" class="deployment">
        <td><a ng-href="/{{deployment.tenantId}}/deployments/{{deployment.id}}"><i class="icon-picture"></i> {{deployment.id | truncate:10}}</a></td>
        <td>{{deployment.name}}</td>
        <td>{{deployment.blueprint.name}}</td>
        <td class="tags-row" ng-cloak ng-show="is_admin() && !is_impersonating()">
          <span class="dropdown tag-settings">
            <button class="btn btn-mini dropdown-toggle">
              <i class="icon-tags"></i>
            </button>
            <ul class="dropdown-menu">
              <li ng-repeat="tag in default_tags">
                <a ng-click="toggle_tag(deployment.tenantId, tag)">
                  {{tag}}<i class="icon-remove pull-right" ng-show="has_tag(deployment.tenantId, tag)"></i>
                </a>
              </li>
            </ul>
          </span>
          {{deployment.tenantId}}
          <span class="tenant_tag" ng-repeat="tag in tenant_tags(deployment.tenantId)">
            <i class="icon {{tag | lowercase}}" tooltip="{{tag}}"></i>
            <span class="label {{tag | lowercase}}">{{tag}}</span>
          </span>
        </td>
        <td>
          <div class="progress deploy_progress">
            <div class="bar" ng-style="{width: ((deployment.operation.complete/deployment.operation.tasks) * 100 || '0') + '%'}"
              ng-class="{'bar-success': deployment.status == 'UP'}">
            </div>
            <span>{{deployment.display_status}}</span>
          </div>
        </td>
        <td>{{deployment.created | formattedFullDate}}<span ng-cloak ng-show="deployment.created_by"> by {{deployment.created_by}}</span> <button ng-cloak ng-show="is_admin()" class="btn btn-mini btn-info pull-right" type="button" ng-click="sync(deployment)">sync</button></td>
      </tr>
    </tbody>
  </table>
  <div data-ng-include data-src="'/partials/shared/pagination.html'"></div>
</div>
