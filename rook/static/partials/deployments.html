<div class="entries container-fluid" ng-init="load()" ng-show="is_content_loaded()">
  <div class='row-fluid'>
    <div class='span2 sidebar-left'>

      <div class='group'>
        <h5><i class="icon-picture"></i> Deployments</h5>
        <a ng-class="{disabled: !is_selected()}" ng-click="sync_deployments()">Sync</a>
      </div>

      <div class='group'>
        <h5><i class="icon-filter"></i> Filter</h5>
        <label class="filter" ng-repeat="filter in filter_list">
          <input type="checkbox" ng-model="filter.active" ng-click="applyFilters()">
          <span>{{filter.name | capitalize}}</span>
        </label>
      </div>

    </div>

    <div class='span10'>
      <table class="table table-striped">
        <thead>
          <tr>
            <th class="id">ID</th>
            <th>Name</th>
            <th>Blueprint</th>
            <th ng-show="is_admin(true)">Tenant</th>
            <th class='text-center'>Status</th>
            <th>Created</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="deployment in items | orderBy:'-created'" ng-click="select_toggle(deployment)" ng-class="{info: selected_deployments[deployment.id]}">
            <td>
              <input name="{{deployment.id}}" type="checkbox" ng-model="selected_deployments[deployment.id]" ng-click="select_toggle(deployment)">
              <ng-include src="'/partials/deployment_settings.html'"></ng-include>
              <a ng-href="/{{deployment.tenantId}}/deployments/{{deployment.id}}">{{deployment.id | truncate:15}}</a>
            </td>
            <td>{{deployment.name}}</td>
            <td>{{deployment.blueprint.name}}</td>
            <td ng-show="is_admin(true)">
              {{deployment.tenantId}}
              <span class="tenant_tag" ng-repeat="tag in tenant_tags(deployment.tenantId)" ng-show="!is_impersonating()">
                <i class="icon {{tag | lowercase}}" tooltip="{{tag}}"></i>
                <span class="label {{tag | lowercase}}">{{tag}}</span>
              </span>
            </td>
            <td>
              <div class="progress progress-container deploy-progress" ng-class="{'deploy-complete': deployment.progress != 100}">
                <div class="bar {{ deployment.display_status | barClass }}" ng-style="{width: deployment.progress + '%'}">
                </div>
                <span>{{deployment.display_status}}</span>
              </div>
            </td>
            <td>
              {{deployment.created | formattedFullDate}}<span ng-cloak ng-show="deployment.created_by"> by {{deployment.created_by}}</span>
            </td>
          </tr>
        </tbody>
      </table>
      <div data-ng-include data-src="'/partials/shared/pagination.html'"></div>
    </div>
  </div>
</div>
