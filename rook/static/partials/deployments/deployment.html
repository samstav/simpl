<div class='hidden' id='deployment_summary_clipping'>
From: {{abs_url}}
App URL: {{formatted_data.path}}
App IP: {{formatted_data.vip}}
Servers:
{{formatted_data.clippy.server_data}}
Databases:
{{formatted_data.clippy.database_data}}
Load balancers:
{{formatted_data.clippy.lb_data}}
Applications:
User:     {{formatted_data.username}}
Password: {{formatted_data.password}}
Priv Key: {{formatted_data.private_key}}
</div>

<div class="entries container-fluid" ng-init="load()">
  <div class="entry well">
    <div class="row-fluid">
      <div class="span2">
        <ng-include src="'/partials/deployments/_deployment_sidebar.html'"></ng-include>
      </div>

      <div class="span10 deployment_container" style="background-image: url({{data.blueprint['meta-data']['reach-info'].tattoo}})">
        <div>
          <h3 style="display: inline">
            {{data.name || data.blueprint.name}}
          </h3><span id="status" class="label" ng-class="{
              'label-info': data.status == 'PLANNED',
              'label-success': data.status == 'UP' || data.status == 'LAUNCHED' || data.status == 'ACTIVE',
              'label-warning': data.status == 'ALERT' || data.status == 'DELETING' || data.status == 'BUILD',
              'label-important': data.status == 'FAILED' || data.status == 'UNREACHABLE' || data.status == 'DOWN',
              'label-inverse': data.status == 'DELETED'
            }">
              {{data.display_status}}
            </span>
          <p>
            Launched using the <a ng-href="/deployments/new?blueprint={{get_blueprint_url(data)}}">
              {{data.blueprint.name}}
            </a> blueprint
            <span ng-show="is_admin(true)">
              by
              <a ng-click="impersonate(data['created-by'])" ng-show="is_admin()" tooltip="Impersonate this user">
                {{data['created-by']}}
              </a>
            </span>
            <span class="cm-tips" tooltip="{{data.created | formattedFullDate}}" tooltip-placement="bottom">
              {{data.created | formattedDate}}
            </span>
            <span ng-show="data.environment.name">in {{data.environment.name}}</span>.
            <hr/>
          </p>


        </div>

        <div class="row-fluid">

          <div class="span7">

            <ng-include src="'/partials/deployments/_details.html'"></ng-include>

            <ng-include src="'/partials/deployments/_infrastructure.html'"></ng-include>
          </div>

          <div class="span5" style="position: relative;">
            <ng-include src="'/partials/deployments/_edit_nodes.html'"
                        ng-show="available_services(data).length > 0"></ng-include>

            <cm-tree-view data="tree_data"
                          select-node="toggle_selected_node"
                          clickable-node="is_scalable_service"
                          width="640" height="480" class="well"></cm-tree-view>

            <ng-include src="'/partials/deployments/_current_operation.html'"></ng-include>

          </div>
        </div>

        <hr>

        <div class="row-fluid">
          <ng-include src="'/partials/deployments/_raw_source.html'"></ng-include>
        </div>

      </div>
    </div>
  </div>
</div>
