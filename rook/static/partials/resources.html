<div class='entries'>
  <div class='row-fluid'>
    <div class='span6' ng-init="load_resources()">

      <div class='well'>
        <h4>Nova Servers</h4>
        <div class='alert alert-info'>Displaying only servers that are not already part of a deployment</div>
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Name</th>
              <th>ID</th>
              <th>Region</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="decorated_serv in resources_by_provider['nova'] | orderBy:'resource.instance.id'">
              <td>{{decorated_serv.resource['dns-name']}}</td>
              <td>{{decorated_serv.resource['instance']['id']}}</td>
              <td>{{decorated_serv.resource['region']}}</td>
              <td>{{decorated_serv.resource['status']}}</td>
              <td><i ng-click="add_to_deployment(decorated_serv)" class="icon-plus-sign-alt clickable"></i></td>
            </tr>
            <tr class='messages'>
              <td colspan="5">
                <div ng-show="!servers_loaded">
                  <img class="loading" src="/img/ajax-loader.gif" />
                  Loading...
                </div>

                <div ng-show="no_servers">
                  No servers found
                </div>

                <div ng-show="servers_error">
                  {{servers_error}}
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class='well'>
        <h4>Load Balancers</h4>
        <div class='alert'>Due to limitations in the Load Balancer API, <b>all</b> load balancers are displayed below, <b>including ones that are already part of another deployment</b>. Take caution in selecting your resources</div>
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Name</th>
              <th>ID</th>
              <th>Region</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="decorated_lb in resources_by_provider['load-balancer'] | orderBy:'resource.instance.id'">
              <td>{{decorated_lb.resource['dns-name']}}</td>
              <td>{{decorated_lb.resource['instance']['id']}}</td>
              <td>{{decorated_lb.resource['region']}}</td>
              <td>{{decorated_lb.resource['status']}}</td>
              <td><i ng-click="add_to_deployment(decorated_lb)" class="icon-plus-sign-alt clickable"></i></td>
            </tr>

            <tr class='messages'>
              <td colspan="5">
                <div ng-show="!lbs_loaded">
                  <img class="loading" src="/img/ajax-loader.gif" />
                  Loading...
                </div>

                <div ng-show="no_lbs">
                  No load balancers found
                </div>

                <div ng-show="lbs_error">
                  {{lbs_error}}
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class='well'>
        <h4>Databases</h4>
        <div class='alert'>Due to limitations in the Database API, <b>all</b> databases are displayed below, <b>including ones that are already part of another deployment</b>. Take caution in selecting your resources</div>
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Name</th>
              <th>ID</th>
              <th>Region</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="decorated_db in resources_by_provider['database'] | orderBy:'resource.instance.id'">
              <td>{{decorated_db.resource['dns-name']}}</td>
              <td>{{decorated_db.resource['instance']['id']}}</td>
              <td>{{decorated_db.resource['region']}}</td>
              <td>{{decorated_db.resource['status']}}</td>
              <td><i ng-click="add_to_deployment(decorated_db)" class="icon-plus-sign-alt clickable"></i></td>
            </tr>

            <tr class='messages'>
              <td colspan="5">
                <div ng-show="!dbs_loaded">
                  <img class="loading" src="/img/ajax-loader.gif" />
                  Loading...
                </div>

                <div ng-show="no_dbs">
                  No databases found
                </div>

                <div ng-show="dbs_error">
                  {{dbs_error}}
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>


    <div class='span6 well'>
      <form ng-submit='submit()'>
        <h4>Create a Deployment</h4>
        Name this deployment: <input type="text" ng-model="deployment.name" required>
        </input>
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Name</th>
              <th>ID</th>
              <th>Region</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="decorated_resource in selected_resources">
              <td><i ng-click="remove_from_deployment(decorated_resource)" class="icon-minus-sign-alt clickable"></i></td>
              <td>{{decorated_resource.resource['dns-name']}}</td>
              <td>{{decorated_resource.resource['instance']['id']}}</td>
              <td>{{decorated_resource.resource['region']}}</td>
              <td>{{decorated_resource.resource['status']}}</td>
            </tr>
          </tbody>
        </table>
        <input type='submit' class='btn' value='Submit' />
      </form>
    </div>
  </div>
</div>

