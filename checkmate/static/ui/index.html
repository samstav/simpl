<!DOCTYPE html>
<html lang="en" ng-app="checkmate">
<head>
  <meta charset="utf-8">
  <title>Checkmate</title>
  <meta name="description" content="Cloud deployment and configuration orchestration">
  <meta name="author" content="Ziad Sawalha">

  <!-- Use the .htaccess and remove these lines to avoid edge case issues.
	   More info: h5bp.com/i/378 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <!-- Mobile viewport optimized: h5bp.com/viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <!-- Place favicon.ico and apple-touch-icon.png in the root directory: mathiasbynens.be/notes/touch-icons -->
  <link rel="apple-touch-icon" href="/apple-touch-icon.png"/>
  <link href="/static/libs/bootstrap-2.1.0/css/bootstrap.min.css" rel="stylesheet">
  <link href="/static/libs/google-code-prettify-rev187/prettify.css" rel="stylesheet">
  <link href="/static/ui/css/style.css" rel="stylesheet">

  <!-- More ideas for your <head> here: h5bp.com/d/head-Tips -->

  <!-- All JavaScript at the bottom, except this Modernizr build.
	   Modernizr enables HTML5 elements & feature detects for optimal performance.
	   Create your own custom Modernizr build: www.modernizr.com/download/ -->
  <script src="/static/libs/modernizr-2.5.3.min.js"></script>

  <!-- *** Code Mirror - code viewer/editor ***
  Note: experienced some problems running this at bottom -->
  <link href="/static/libs/code-mirror-2.32/lib/codemirror.css" rel="stylesheet"/>
  <link href="/static/libs/code-mirror-2.32/theme/lesser-dark.css" rel="stylesheet"/>

  <script src="/static/libs/code-mirror-2.32/lib/codemirror.js" type="text/javascript"></script>
  <script src="/static/libs/code-mirror-2.32/mode/javascript/javascript.js" type="text/javascript"></script>
  <script src="/static/libs/code-mirror-2.32/lib/util/foldcode.js" type="text/javascript"></script>

  <link href="/static/libs/angular-ui-0.2.0/css/angular-ui.min.css" rel="stylesheet"/>
  <link href="/static/libs/bootstrap-notify/css/bootstrap-notify.css" rel="stylesheet">
  <link href="/static/libs/bootstrap-notify/css/styles/alert-bangtidy.css" rel="stylesheet">
    
  <style type="text/css">
    [ng\:cloak], [ng-cloak], .ng-cloak {
      display: none;
    }
  </style>

  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
</head>
<body onload="prettyPrint()" ng-controller="AppController" class="ng-cloak" w-down="tasks.next()" w-up="tasks.prev()"
	  w-read="toggleRead()" w-star="toggleStar()" w-space="handleSpace()">
  <!-- Prompt IE 6 users to install Chrome Frame. Remove this if you support IE 6.
	   chromium.org/developers/how-tos/chrome-frame-getting-started -->
  <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->

  <header ng-cloak ng-show="showHeader">
	<div class="navbar navbar-fixed-top no-select navbar-inverse" ng-controller="NavBarController">
	  <div class="navbar-inner">
		<div class="container">
		  <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
		  </button>
		  <a class="brand" href="/"><img id="loading" src="/static/img/ajax-loader-white.gif" style="display: none;"/> Checkmate</a>
		  <!--TODO: collapsing not yet clean -->
          <div id="user_control" class="nav pull-right">
            <ul class="nav">
              <li class="divider-vertical"></li>
              <li class="dropdown pull-right" style="display: none;" ng-show="auth.loggedIn">
                <a href="#"
                      class="dropdown-toggle"
                      data-toggle="dropdown">
                      <i class="icon-user icon-white"></i> {{auth.username}}
                      <span ng-show="auth.tenantId"> ({{auth.tenantId}})</span>
                      <b class="caret"></b>
                </a>
                <ul class="dropdown-menu">
                  <li><a ng-click="logOut()">Log Out</a></li>
                </ul>
              </li>
              <li class="pull-right" style="display: none" ng-show="!auth.loggedIn">
                <a href="#" ng-click="loginPrompt()">
                  <i class="icon-user icon-white"></i> Log In</a>
              </li>
            </ul>
          </div>
          <div class="nav-collapse collapse" style="display: none" ng-show="auth.loggedIn">
			<ul id="nav-elements" class="nav">
			  <li id="nav-deployments"><a href="/{{auth.tenantId}}/deployments">Deployments</a></li>
			  <li id="nav-workflows"><a href="/{{auth.tenantId}}/workflows">Workflows</a></li>
			  <li id="nav-environments"><a href="/{{auth.tenantId}}/environments">Environments</a></li>
			  <li id="nav-blueprints"><a href="/{{auth.tenantId}}/blueprints">Blueprints</a></li>
              <li class="dropdown">
                <a href="#"
                      class="dropdown-toggle"
                      data-toggle="dropdown">
                      <b class="caret"></b>
                </a>
                <ul class="dropdown-menu">
                  <li id="nav-providers"><a href="/providers">Providers</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">Status</li>
                  <li id="nav-status-celery"><a href="/status/celery">Celery</a></li>
                  <li id="nav-status-libraries"><a href="/status/libraries">Libraries</a></li>
                </ul>
              </li>
			  <li class="divider-vertical"></li>
              <form class="navbar-search" id="navSearch" style="display: none" ng-show="showSearch">
                <input type="search" ng-model="$parent.search" class="search-query span2" style="height: 15px;" placeholder="Search">
              </form>
            </ul>
		  </div><!--/.nav-collapse -->
		</div>
	  </div>
	</div>
  </header>

  <div class="container-fluid mainContent" ng-view>
    <!-- main content goes here. It can contain:
      //Controls on the left. Assign them to top, middle or bottom
      <section id="leftControls" class="lcontrols no-select" ng-cloak ng-show="showControls">
        <div class="tControls">
          <div class="top">
            <button ng-click="tasks.markAllRead()" class="btn" title="Run workflow" alt="Run"><i class="icon-play"></i></button>
            ...
          </div>
        </div>
      </section
      //summaries (shown as tiles on the left):
      <section class="summaries" ng-cloak ng-show="showSummaries">
        // Status card
        <section class="top well" ng-cloak ng-show="showStatus">
          <h4>{{name}}</h4>
          <div>
            <a class="label label-info cmtip" title="Total items" ng-click="showAll()">{{count}}</a> items: 
            <a class="label label-success cmtip" title="Completed" ng-click="showUnread()">{{count}}</a>
            <a class="label label-warning cmtip" title="Waiting" ng-click="showStarred()">{{count}}</a>  
            <a class="label label-important cmtip" title="Errors" ng-click="showRead()">{{count}}</a>
          </div>
        </section>
        // All other cards - ng-repeat those
        <article class="well summary">
          ...
        </article>
      </section>

      //And an entry (shown as a page with content in it):
      <section class="entries">
        <article class="well entry">
          ...
        </article>
      </section>
      Ref: http://vojtajina.github.com/WebApp-CodeLab/FinalProject/index.html
    -->
  </div>
  <div class="notifications bottom-right"></div>

  <footer ng-cloak style="display: none" ng-show="showFooter">
    <a data-toggle="modal" href="#modalAbout">&copy; Rackspace Hosting 2012</a>
  </footer>

  <div id="modalAuth" class="modal hide fade">
	<div class="modal-header">
	  <button type="button" class="close" data-dismiss="modal">×</button>
	  <h3>Log In</h3>
	  <p>Log in to your Rackspace Cloud account. This will work with US and UK accounts. If you'd like to specify a region or use your API key, there are <a href="#" data-toggle="collapse" data-target="#auth_options">More Options</a> available.</p>
	</div>
	<div class="modal-body">
	  <form class="form-horizontal">
		<div id="auth_error" class="alert alert-error hide">
		  <strong>Authentication Failed!</strong> <span id="auth_error_text"></span>.
		</div>
		<fieldset>
		  <div class="control-group">
			<label class="control-label" for="username">Username</label>
			<div class="controls">
			  <input type="text" class="input-xlarge" id="username" ng-model="bound_creds.username"></i>
			</div>
		  </div>
		  <div class="control-group">
			<label class="control-label" for="password">Password</label>
			<div class="controls">
			  <input type="password" class="input-xlarge" id="password" ng-model="bound_creds.password">
			</div>
		  </div>
		  <div id="auth_options" class="collapse out">
			<p>or</p>
			<div class="control-group">
			  <label class="control-label" for="apikey">API Key</label>
			  <div class="controls">
				<input type="password" class="input-xlarge" id="apikey" ng-model="bound_creds.apikey">
			  </div>
			</div>
            <hr/>
			<div class="control-group">
			  <label class="control-label" for="auth_url">Cloud/Region</label>
			  <div class="controls">
				<select id="auth_url" class="span3" required ng-model="bound_creds.auth_url">
				  <option value="https://identity.api.rackspacecloud.com/v2.0/tokens">US Cloud (Rackspace)</option>
				  <option value="https://lon.identity.api.rackspacecloud.com/v2.0/tokens">UK Cloud (Rackspace)</option>
				</select>
			  </div>
			</div>
		  </div>
		</fieldset>
		<div class="modal-footer">
		  <a href="#" class="btn btn-primary" ng-click="logIn(username.value, password.value, apikey.value, auth_url.value)">Authenticate!</a>
		  <p id="login-test"></p>
		</div>
	  </form>
	</div>
  </div>
  <div id="modalError" class="modal hide fade" >
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">×</button>
      <h3>{{error.title}}</h3>
    </div>
    <div class="modal-body">
      <p>
        {{error.message}}
        <pre>{{error.data}}</pre>
      </p>
    </div>
    <div class="modal-footer">
      <a href="#" class="btn" data-dismiss="modal">Close</a>
    </div>
  </div>

  <!-- IMPORTANT: load jquery BEFORE angular. Or angular will use JQLite and
  that has caused me a few time-sucking debug sessions!-->
  <script src="/static/libs/jquery-1.7.2.min.js" type="text/javascript"></script>
  
  <!-- Others -->
  <script src="/static/libs/underscore-min.js" type="text/javascript"></script>
  <script src="/static/libs/mustache.js" type="text/javascript"></script>
  <script src="/static/libs/yaml.js" type="text/javascript"></script>
  <script src="/static/libs/moment-1.4.0.min.js" type="text/javascript"></script>
  <script src="/static/libs/google-code-prettify-rev187/prettify.js" type="text/javascript"></script>
  <script src="/static/libs/jquery.jsPlumb-1.3.10-all-min.js" type="text/javascript"></script>
  <script src="/static/libs/d3.v2.min.js" type="text/javascript"></script>
  <script src="/static/libs/bootstrap-notify/js/bootstrap-notify.js"></script>

  <!-- Bootstrap - compiled into one file-->
  <script src="/static/libs/bootstrap-2.1.0/js/bootstrap.min.js"></script>

  <!-- Angular -->
  <script src="/static/libs/angular-1.0.2/angular.js" type="text/javascript"></script>
  <script src="/static/libs/angular-1.0.2/angular-cookies.js" type="text/javascript"></script>
  <script src="/static/libs/angular-1.0.2/angular-resource.js" type="text/javascript"></script>
  <script src="/static/libs/angular-1.0.2/angular-sanitize.js" type="text/javascript"></script>

  <!-- Angular enhancements/extensions -->
  <script src="/static/libs/angular-ui-0.2.0/js/angular-ui.min.js" type="text/javascript"></script>
  <script src="/static/libs/angular-ui-0.2.0/js/angular-ui-ieshiv.min.js" type="text/javascript"></script>

  <!-- Our Angular Implementation-->
  <script src="/static/ui/js/app.js" type="text/javascript"></script>
  <script src="/static/ui/js/filters.js" type="text/javascript"></script>
  <script src="/static/ui/js/services.js" type="text/javascript"></script>
  <script src="/static/ui/js/directives.js" type="text/javascript"></script>
  <!--<script src="js/plugins.js" type="text/javascript"></script>-->

  <!-- Checkmate Extensions and converntions -->
  <script type="text/javascript">
    $(".cmpop").popover();  //anything with a 'cmpop' class will attempt to pop over using the data-content and title attributes
    $(".cmtip").tooltip();  //anything with a 'cmtip' class will attempt to show a tooltip of the title attribute
    $(".cmcollapse").collapse();  //anything with a 'cmcollapse' class will be collapsible

    if (Modernizr.localstorage) {
      // window.localStorage is available!
    } else {
      alert("This browser application requires an HTML5 browser with support for local storage");
    }
  </script>
  
  <!-- Asynchronous Google Analytics snippet. Change UA-XXXXX-X to be your site's ID.
	   mathiasbynens.be/notes/async-analytics-snippet -->

  <!--<script>
	var _gaq=[['_setAccount','UA-29459980-1'],['_trackPageview']];
	(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
	g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
	s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>-->
</body>
</html>
