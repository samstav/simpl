var Lawnchair=function(a,b){if(!(this instanceof Lawnchair))return new Lawnchair(a,b);if(!JSON)throw"JSON unavailable! Include http://www.json.org/json2.js to fix.";if(2>=arguments.length&&0<arguments.length)b="function"===typeof arguments[0]?arguments[0]:arguments[1],a="function"===typeof arguments[0]?{}:arguments[0];else throw"Incorrect # of ctor args!";if("function"!==typeof b)throw"No callback was provided";this.record=a.record||"record";this.name=a.name||"records";var c;if(a.adapter)for(var d=
0,e=Lawnchair.adapters.length;d<e;d++){if(Lawnchair.adapters[d].adapter===a.adapter){c=Lawnchair.adapters[d].valid()?Lawnchair.adapters[d]:void 0;break}}else{d=0;for(e=Lawnchair.adapters.length;d<e&&!(c=Lawnchair.adapters[d].valid()?Lawnchair.adapters[d]:void 0);d++);}if(!c)throw"No valid adapter.";for(var f in c)this[f]=c[f];d=0;for(e=Lawnchair.plugins.length;d<e;d++)Lawnchair.plugins[d].call(this);this.init(a,b)};Lawnchair.adapters=[];
Lawnchair.adapter=function(a,b){b.adapter=a;var c="adapter valid init keys save batch get exists all remove nuke".split(" "),d=this.prototype.indexOf,e;for(e in b)if(-1===d(c,e))throw"Invalid adapter! Nonstandard method: "+e;Lawnchair.adapters.splice(0,0,b)};Lawnchair.plugins=[];Lawnchair.plugin=function(a){for(var b in a)"init"===b?Lawnchair.plugins.push(a[b]):this.prototype[b]=a[b]};
Lawnchair.prototype={isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},indexOf:function(a,b,c,d){if(a.indexOf)return a.indexOf(b);c=0;for(d=a.length;c<d;c++)if(a[c]===b)return c;return-1},lambda:function(a){return this.fn(this.record,a)},fn:function(a,b){return"string"==typeof b?new Function(a,b):b},uuid:function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},each:function(a){var b=
this.lambda(a);if(this.__results)for(var a=0,c=this.__results.length;a<c;a++)b.call(this,this.__results[a],a);else this.all(function(a){for(var c=0,f=a.length;c<f;c++)b.call(this,a[c],c)});return this}};