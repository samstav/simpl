{
  "blueprint": {
    "services": {
      "lb": {
        "open-ports": [
          "80/tcp"
        ], 
        "component": {
          "interface": "http", 
          "type": "load-balancer"
        }, 
        "relations": {
          "web": "http", 
          "master": "http"
        }, 
        "exposed": true
      }, 
      "master": {
        "component": {
          "type": "application", 
          "role": "master", 
          "name": "wordpress"
        }, 
        "relations": {
          "backend": "mysql"
        }, 
        "constraints": [
          {
            "count": 1
          }
        ]
      }, 
      "web": {
        "component": {
          "type": "application", 
          "role": "web", 
          "name": "wordpress"
        }, 
        "relations": {
          "master": "http", 
          "db": {
            "interface": "mysql", 
            "service": "backend"
          }
        }
      }, 
      "backend": {
        "component": {
          "interface": "mysql", 
          "type": "database"
        }
      }
    }, 
    "description": "uses MC config recipes which support blah...., multiple domains, ....", 
    "options": {
      "username": {
        "regex": "xxx", 
        "type": "string", 
        "description": "The user name used to access all resources in this deployment", 
        "label": "Admin"
      }, 
      "domain": {
        "regex": "^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\\-]*[A-Za-z0-9])$", 
        "constrains": [
          {
            "setting": "apache/domain_name", 
            "service": "web", 
            "resource_type": "application"
          }
        ], 
        "sample": "example.com", 
        "description": "The domain you wish to host your blog on. (ex: example.com)", 
        "type": "string", 
        "label": "Domain"
      }, 
      "secure": {
        "type": "boolean", 
        "description": "Make this a hardened deployment (you lose some flexibility)", 
        "label": "secure"
      }, 
      "instance_os": {
        "constrains": [
          {
            "setting": "os", 
            "service": "web", 
            "resource_type": "compute"
          }, 
          {
            "setting": "os", 
            "service": "web", 
            "resource_type": "compute"
          }
        ], 
        "description": "The operating system for the web servers.", 
        "default": "Ubuntu 11.10", 
        "type": "select", 
        "options": [
          {
            "name": "Ubuntu 11.10", 
            "value": "Ubuntu 11.10"
          },
          {
            "name": "Ubuntu 12.04 LTS", 
            "value": "Ubuntu 12.04 LTS"
          },
          {
            "name": "CentOS", 
            "value": "CentOS"
          },
          {
            "name": "RHEL 6", 
            "value": "RHEL 6"
          }
        ], 
        "label": "Instance OS"
      }, 
      "instance_count": {
        "constrains": [
          {
            "setting": "count", 
            "service": "web", 
            "resource_type": "compute"
          }
        ], 
        "description": "The number of instances for the specified task.", 
        "default": 2, 
        "constraints": [
          {
            "greater-than": 1
          }
        ], 
        "type": "number", 
        "label": "Number of Instances"
      }, 
      "instance_flavor": {
        "constrains": [
          {
            "setting": "size", 
            "service": "web", 
            "resource_type": "compute"
          }, 
          {
            "setting": "size", 
            "service": "master", 
            "resource_type": "compute"
          }
        ], 
        "description": "The size of the instance in MB of RAM.", 
        "default": 1024, 
        "type": "select", 
        "options": [
          {
            "name": "256 Mb", 
            "value": 256
          }, 
          {
            "name": "512 Mb", 
            "value": 512
          }, 
          {
            "name": "1 Gb", 
            "value": 1024
          }
        ], 
        "label": "Instance Size"
      }, 
      "database_volume_size": {
        "default": 1, 
        "constrains": [
          {
            "setting": "disk", 
            "service": "backend", 
            "resource_type": "database"
          }
        ], 
        "type": "number", 
        "description": "The hard drive space available for the database instance in GB.", 
        "label": "Database Volume Size"
      }, 
      "ssl": {
        "default": false, 
        "label": "SSL Enabled", 
        "type": "boolean", 
        "help": "If this option is selected, SSL keys need to be supplied as well. This option is\nalso currently mutually exclusive with the Varnish Caching option.\n", 
        "description": "Use SSL to encrypt web traffic."
      }, 
      "prefix": {
        "constrains": [
          {
            "setting": "wordpress/prefix", 
            "service": "web", 
            "resource_type": "application"
          }, 
          {
            "setting": "user/name", 
            "service": "web", 
            "resource_type": "application"
          }, 
          {
            "setting": "database/name", 
            "service": "backend", 
            "resource_type": "database"
          }
        ], 
        "help": "Note that this also the user name, database name, and also identifies this\nwordpress install from other ones you might add later to the same deployment.\n", 
        "description": "The application ID (and wordpress table prefix).", 
        "required": true, 
        "type": "string", 
        "label": "Prefix"
      }, 
      "ssl_private_key": {
        "sample": "-----BEGIN PRIVATE KEY-----\nEncoded key\n-----END PRIVATE KEY-----\n", 
        "constrains": [
          {
            "setting": "apache/ssl_key", 
            "service": "web", 
            "resource_type": "application"
          }
        ], 
        "type": "string", 
        "label": "SSL Certificate Private Key"
      }, 
      "path": {
        "constrains": [
          {
            "setting": "apache/path", 
            "service": "web", 
            "resource_type": "application"
          }, 
          {
            "setting": "wordpress/path", 
            "service": "web", 
            "resource_type": "application"
          }
        ], 
        "sample": "/blog", 
        "description": "The path you wish to host your blog on under your domain. (ex: /blog)", 
        "default": "/", 
        "type": "string", 
        "label": "Path"
      }, 
      "password": {
        "regex": "xxx", 
        "type": "string", 
        "description": "Password to use for service. Click the generate button to generate a random password.", 
        "label": "Password"
      }, 
      "high_availability": {
        "type": "boolean", 
        "description": "Insures your blog has higher uptimes by using redundant hardware (e.g. multuple servers)", 
        "label": "High Availability"
      }, 
      "ssl_certificate": {
        "sample": "-----BEGIN CERTIFICATE-----\nEncoded Certificate\n-----END CERTIFICATE-----\n", 
        "constrains": [
          {
            "setting": "apache/ssl_cert", 
            "service": "web", 
            "resource_type": "application"
          }
        ], 
        "type": "string", 
        "description": "SSL certificate in PEM format. Make sure to include the BEGIN and END certificate lines.", 
        "label": "SSL Certificate"
      }, 
      "varnish": {
        "default": false, 
        "constrains": [
          {
            "setting": "varnish/enabled", 
            "service": "web", 
            "resource_type": "application"
          }
        ], 
        "type": "boolean", 
        "label": "Varnish Caching"
      }, 
      "database_memory": {
        "constrains": [
          {
            "setting": "memory", 
            "service": "backend", 
            "resource_type": "database"
          }
        ], 
        "description": "The size of the database instance in MB of RAM.", 
        "default": 312, 
        "type": "select", 
        "options": [
          {
            "name": "512 Mb", 
            "value": 512
          }, 
          {
            "name": "1024 Mb", 
            "value": 1024
          }, 
          {
            "name": "2048 Mb", 
            "value": 2048
          }, 
          {
            "name": "4096 Mb", 
            "value": 4096
          }
        ], 
        "label": "Database Size"
      }, 
      "region": {
        "required": true, 
        "type": "select", 
        "label": "Region", 
        "options": [
          {
            "name": "Dallas, TX USA",
            "value": "DFW"
          },
          {
            "name": "Chicago, IL USA",
            "value": "ORD"

          }
        ]
      }, 
      "register-dns": {
        "default": false, 
        "type": "boolean", 
        "label": "Register DNS Name"
      }
    }, 
    "name": "Scalable Wordpress (Managed Cloud Config)"
  }
}