---
id: apache
is: web
requires:
- host: linux
provides:
- web: apache
options:
  server_alias:
    type: array
    example:
    - "www.example.com"
    - "blog.example.com"
    label: "Additional domain names to respond on"
  port:
    default: 80
    type: integer
    label: "Listening port"
  server_name:
    type: string
    example: "example.com"
    label: "Site's domain name"
meta-data:
  display-hints:
    icon-20x20: "/images/apache-small.png"
    tattoo: "/images/apache.png"
---
id: "nginx"
is: "web"
requires:
- host: linux
provides:
- web: "nginx"
meta-data:
  display-hints:
    icon-20x20: "/images/nginx.png"
    tattoo: "/images/nginx.png"
---
id: "new-relic"
is: "monitoring"
provides:
- monitoring: "new-relic"
requires:
- host: linux
options:
  license:
    type: string
    label: "New Relic license key"
meta-data:
  display-hints:
    icon-20x20: "/images/newrelic.png"
    tattoo: "/images/newrelic.png"
---
id: "rax-cloud-monitoring"
is: "monitoring"
provides:
- monitoring: "rackspace"
requires: []
options: {}
meta-data:
  display-hints:
    icon-20x20: "/images/icon-monitoring.svg"
    tattoo: "/images/icon-monitoring.svg"
---
id: mongodb
is: database
provides:
- database: mongodb
requires:
- host: linux
options:
  port:
    type: integer
    label: "Listening port"
meta-data:
  display-hints:
    icon-20x20: "/images/mongodb-icon-20x20.png"
    tattoo: "/images/mongodb-tattoo.png"
---
id: postgres
is: database
requires:
- host: linux
provides:
- database: postgres
meta-data:
  display-hints:
    icon-20x20: "/images/postgres-icon.png"
    tattoo: "/images/postgre_sql_256.png"
---
is: database
name: mysql
provides:
- database: mysql
options:
  server_root_password:
    default: '=generate_password(min_length=12, required_chars=[\"0123456789\", \"abcdefghijklmnopqrstuvwxyz\", \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"])'
    required: true
    type: password
    display-hints:
      group: application
      order: 1
    constraints:
    - regex: "^((.){8,255})?$"
      message: "must be between 8 and 255 characters long if provided"
  username:
    default: root
    required: true
    type: string
    display-hints:
      group: application
      order: 2
  password:
    default: '=generate_password(min_length=12, required_chars=[\"0123456789\", \"abcdefghijklmnopqrstuvwxyz\", \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"])'
    required: true
    type: password
    display-hints:
      group: application
      order: 3
    constraints:
    - regex: "^((.){8,255})?$"
      message: "must be between 8 and 255 characters long if provided"
meta-data:
  display-hints:
    icon-20x20: "/images/mysql-small.png"
    tattoo: "/images/mysql-tattoo.png"
---
id: "opscode.chef-server.mysql"
is: "database"
name: "mysql"
display-name: "MySQL (Chef Server)"
provider: "opscode.chef-server"
provides:
- database: mysql
requires:
- host: linux
options:
  server_root_password:
    default: '=generate_password(min_length=12, required_chars=[\"0123456789\", \"abcdefghijklmnopqrstuvwxyz\", \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"])'
    required: true
    type: password
    display-hints:
      group: application
      order: 1
    constraints:
    - regex: "^((.){8,255})?$"
      message: "must be between 8 and 255 characters long if provided"
  username:
    default: root
    required: true
    type: string
    display-hints:
      group: application
      order: 2
  password:
    default: '=generate_password(min_length=12, required_chars=[\"0123456789\", \"abcdefghijklmnopqrstuvwxyz\", \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"])'
    required: true
    type: password
    display-hints:
      group: application
      order: 3
    constraints:
    - regex: "^((.){8,255})?$"
      message: "must be between 8 and 255 characters long if provided"
meta-data:
  display-hints:
    icon-20x20: "/images/mysql-small.png"
    tattoo: "/images/mysql-tattoo.png"
---
id: rsCloudDb
is: database
name: myql
display-name: "Cloud Database (MySQL)"
provider: "rackspace.databases"
provides:
- database: mysql
requires:
- compute: mysql
options:
  server_root_password:
    default: '=generate_password(min_length=12, required_chars=[\"0123456789\", \"abcdefghijklmnopqrstuvwxyz\", \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"])'
    required: true
    type: password
    display-hints:
      group: application
      order: 1
    constraints:
    - regex: "^((.){8,255})?$"
      message: "must be between 8 and 255 characters long if provided"
  username:
    default: root
    required: true
    type: string
    display-hints:
      group: application
      order: 2
  password:
    default: '=generate_password(min_length=12, required_chars=[\"0123456789\", \"abcdefghijklmnopqrstuvwxyz\", \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"])'
    required: true
    type: password
    display-hints:
      group: application
      order: 3
    constraints:
    - regex: "^((.){8,255})?$"
      message: "must be between 8 and 255 characters long if provided"
meta-data:
  display-hints:
    icon-20x20: "/images/icon-databases.svg"
    tattoo: "/images/icon-databases.svg"
---
id: varnish
is: cache
requires:
- host: linux
provides:
- cache: "varnish"
meta-data:
  display-hints:
    icon-20x20: "/images/varnish.jpg"
    tattoo: "/images/varnish.jpg"
---
id: memcached
is: cache
provides:
- cache: memcache
requires:
- host: linux
options:
  monitoring:
    default: false
    type: "boolean"
    label: "Enable monitoring"
  port:
    type: integer
    label: "Listening port"
meta-data:
  display-hints:
    icon-20x20: "/images/memcached-icon-20x20.png"
    tattoo: "/images/memcached-tattoo.png"
---
id: redis
is: cache
name: redis
provides:
- cache: redis
requires:
- host: linux
options:
  port:
    type: integer
    label: "Listening port"
meta-data:
  display-hints:
    icon-20x20: "/images/redis-icon-20x20.png"
    tattoo: "/images/redis-tattoo.png"
---
id: "rsCloudRedis"
is: "cache"
name: "redis"
display-name: "Cloud Redis"
provider: "rackspace.databases"
provides:
- cache: "FPC"
- cache: "sessions"
- cache: "objects"
- cache: "*"
options:
  size:
    default: 512
    required: true
    type: integer
    display-hints:
      group: "cache"
      order: 1
meta-data:
  display-hints:
    icon-20x20: "/images/redis-icon-20x20.png"
    tattoo: "/images/redis-tattoo.png"
---
id: gluster
is: storage
requires:
- host: linux
provides:
- storage: gluster
meta-data:
  display-hints:
    icon-20x20: "/images/glusterfs-icon-20x20.png"
    tattoo: "/images/glusterfs-tattoo.png"
---
is: storage
id: "rax-cloud-files"
meta-data:
  display-hints:
    icon-20x20: "/images/icon-files.svg"
    tattoo: "/images/icon-files.svg"
---
is: application
id: app
provides:
- application: http
requires:
- host: linux
options:
  demo:
    type: "boolean"
    label: "Enable Demo"
  packages:
    type: string
    label: "PHP Packages"
meta-data:
  display-hints:
    icon-20x20: "/images/github.ico"
    tattoo: "/images/github-tattoo.png"
---
is: application
id: "magento"
provides:
- application: http
requires:
- host: linux
- database: mysql
- cache: "FPC"
- cache: "sessions"
- cache: "objects"
- cache: "*"
meta-data:
  display-hints:
    icon-20x20: "/images/magento-icon-20x20.png"
    tattoo: "/images/magento-tattoo.png"
---
is: application
id: "asp.net"
provides:
- application: http
requires:
- host: "windows"
meta-data:
  display-hints:
    icon-20x20: "/images/asp-net-icon-20x20.png"
    tattoo: "/images/asp-net-tattoo.png"
---
id: wordpress
is: application
provides:
- application: http
requires:
- host: linux
- database: mysql
options:
  prefix:
    type: string
    label: "Prefix"
  url:
    label: "Site Address"
    description: "The address you wish to host your blog on."
    type: "url"
    required: true
    default: "http://example.com/"
    display-hints:
      group: application
      order: 1
      default-protocol: http
      encrypted-protocols:
      - https
      sample: "http://example.com/"
    constraints:
    - protocols:
      - http
      - https
      message: "must be a supported protocol"
    - regex: "^([a-zA-Z]{2,}?\\:\\/\\/[a-zA-Z0-9\\-]+(?:\\.[a-zA-Z0-9\\-]+)*\\.[a-zA-Z]{2,16}(?:\\/?|(?:\\/[\\w\\-]+)*)(?:\\/?|\\/\\w+\\.[a-zA-Z]{2,4}(?:\\?[\\w]+\\=[\\w\\-]+)?)?(?:\\&[\\w]+\\=[\\w\\-]+)*)$"
      message: "must be a valid web address"
meta-data:
  display-hints:
    icon-20x20: "/images/wordpress-icon-20x20.png"
    tattoo: "/images/wordpress-tattoo.png"
---
id: "rsCloudLB"
is: "load-balancer"
provides:
- load-balancer: vip
- load-balancer: http
- load-balancer: https
requires:
- application: http
options:
  algorithm:
    type: list
    choice:
      - http
      - https
  create_dns:
    type: "boolean"
    default: false
  allow_insecure:
    type: "boolean"
    default: false
meta-data:
  display-hints:
    icon-20x20: "/images/icon-load-balancers.svg"
    tattoo: "/images/icon-load-balancers.svg"
---
id: "rax:dns"
is: dns
meta-data:
  display-hints:
    icon-20x20: "/images/icon-dns.svg"
    tattoo: "/images/icon-dns.svg"
