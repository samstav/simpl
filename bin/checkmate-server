#!/usr/bin/env python
import os
from subprocess import call
import sys


def start_server():
    path = os.path.normpath(os.path.join(os.path.dirname(__file__), os.pardir,
                                         'checkmate', 'server.py'))
    params = ["python", path]
    if len(sys.argv) > 1:
        params.extend(sys.argv[1:])
    else:
        # dev defaults
        params.extend([
            'START',
            '--with-admin',
            '--with-simulator',
            '--verbose',
            '--with-ui',
        ])
        print "Starting with development defaults"
    try:
        print 'Running: %s' % ' '.join(params)
        call(params)
    except KeyboardInterrupt:
        print "\nExiting by keyboard request"

if __name__ == '__main__':
    start_server()
